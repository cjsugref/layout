[{"name":"app.R","content":"library(shiny)\r\nlibrary(bslib)\r\nlibrary(data.table)\r\n\r\nsource('functions.R')\r\n\r\ndata_versions <- data_versions_lists()\r\n\r\n\r\nui <- (navbarPage(\r\n  \"DE\",\r\n  theme = bslib::bs_theme(bootswatch = \"cosmo\",\r\n                          bg = \"#FFFFFF\",\r\n                          fg = \"#00718f\",\r\n                          primary = \"#00718f\",\r\n                          secondary = \"#00718f\"),\r\n  tabPanel(\r\n    \"Tools\",\r\n    sidebarLayout(\r\n      sidebarPanel(\r\n        selectInput(\"file\", \"Choose TY\", data_versions),\r\n      ),\r\n      mainPanel(\r\n        tabsetPanel(\r\n          tabPanel(\r\n            \"Graphs\"\r\n          ),\r\n          tabPanel(\r\n            \"Tables\"\r\n          )\r\n        )\r\n      )\r\n    )\r\n\r\n  ),\r\n  tabPanel(\"Guide\"\r\n  ),\r\n  tabPanel(\"Documentation\"\r\n  ))\r\n)\r\nserver <- function(input, output, session) {\r\n\r\n}\r\n\r\nshinyApp(ui, server)","type":"text"},{"name":"functions.R","content":"library(data.table)\r\n\r\ndata_versions_names <- function() { \r\n  files_available <- list.files('../data/')\r\n  file_input_dt <- data.table(\"versions\" = character(), \"years\" = list())\r\n  for (file in files_available) {\r\n    file <- strsplit(file, \"_\")[[1]]\r\n    hes_efu <- paste0(file[2], \", \", file[3])\r\n    year <- paste0(\"20\", substr(file[4], 3, 4))\r\n    if (nrow(file_input_dt[versions %like% hes_efu]) == 0) {\r\n      file_input_dt <- rbindlist(list(file_input_dt, data.table(\"versions\" = hes_efu, \"years\" = list())))\r\n    }\r\n    file_input_dt[versions == hes_efu, \"years\" := list(c(years[[1]], year))]\r\n  }\r\n  return(file_input_dt)\r\n}\r\n\r\ndata_versions_lists <- function() { \r\n  files_available <- list.files('../data/')\r\n  file_list <- list()\r\n  for (file in files_available) {\r\n    file_split <- strsplit(file, \"_\")[[1]]\r\n    hes_efu <- paste0(file_split[2], \", \", file_split[3])\r\n    year <- paste0(\"20\", substr(file_split[4], 3, 4))\r\n    file_list[[hes_efu]] <- c(file_list[[hes_efu]], file)\r\n    names(file_list[[hes_efu]])[length(file_list[[hes_efu]])] <- year\r\n  }\r\n  return(file_list)\r\n}\r\n\r\nlister <- data_versions_lists()\r\n\r\nlister\r\n\r\ntryme <- function() { \r\n  files_available <- list.files('../data/')\r\n  file_input_dt <- data.table()\r\n  for (file in files_available) {\r\n    file <- strsplit(file, \"_\")[[1]]\r\n    hes_efu <- paste0(file[2], \", \", file[3])\r\n    year <- paste0(\"20\", substr(file[4], 3, 4))\r\n    file_input_dt[, (hes_efu) := year]\r\n  }\r\n  return(file_input_dt)\r\n}\r\n\r\ntest <- tryme()\r\n\r\n","type":"text"},{"name":"test.R","content":"source('functions.R')\r\n\r\ndata_versions <- as.data.table(data_version_names())\r\n\r\ndata_versions\r\nversions <- data_versions[, \"versions\"]\r\nyears <- data_versions[, \"years\"]","type":"text"}]
